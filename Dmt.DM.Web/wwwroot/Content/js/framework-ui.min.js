$(function(){document.body.className=localStorage.getItem("config-skin");$("[data-toggle='tooltip']").tooltip()});$.reload=function(){return location.reload(),!1};$.loading=function(n,t){var r=top.$("#loadingPage"),i=r.find(".loading-content");n?r.show():i.attr("istableloading")==undefined&&r.hide();t?i.html(t):i.html("数据加载中，请稍后…");i.css("left",(top.$("body").width()-i.width())/2-50);i.css("top",(top.$("body").height()-i.height())/2)};$.request=function(n){for(var t,u=location.search.slice(1),r=u.split("&"),i=0;i<r.length;i++)if(t=r[i].split("="),t[0]==n)return unescape(t[1])=="undefined"?"":unescape(t[1]);return""};$.currentWindow=function(){var n=top.$(".NFine_iframe:visible").attr("id");return top.frames[n]};$.browser=function(){var n=navigator.userAgent,t=n.indexOf("Opera")>-1;return t?"Opera":n.indexOf("Firefox")>-1?"FF":n.indexOf("Chrome")>-1?window.navigator.webkitPersistentStorage.toString().indexOf("DeprecatedStorageQuota")>-1?"Chrome":"360":n.indexOf("Safari")>-1?"Safari":n.indexOf("compatible")>-1&&n.indexOf("MSIE")>-1&&!t?"IE":void 0};$.download=function(n,t,i){if(n&&t){t=typeof t=="string"?t:jQuery.param(t);var r="";$.each(t.split("&"),function(){var n=this.split("=");r+='<input type="hidden" name="'+n[0]+'" value="'+n[1]+'" />'});$('<form action="'+n+'" method="'+(i||"post")+'">'+r+"<\/form>").appendTo("body").submit().remove()}};$.modalOpen=function(n){var n=$.extend({id:null,title:"系统窗口",width:"100px",height:"100px",url:"",shade:.3,btn:["确认","关闭"],btnclass:["btn btn-primary","btn btn-danger"],callBack:null},n),t=top.$(window).width()>parseInt(n.width.replace("px",""))?n.width:top.$(window).width()+"px",i=top.$(window).height()>parseInt(n.height.replace("px",""))?n.height:top.$(window).height()+"px";top.layer.open({id:n.id,type:2,shade:n.shade,title:n.title,fix:!1,area:[t,i],content:n.url,btn:n.btn,btnclass:n.btnclass,yes:function(){n.callBack(n.id)},cancel:function(){return!0}})};$.modalConfirm=function(n,t){top.layer.confirm(n,{icon:"fa-exclamation-circle",title:"系统提示",btn:["确认","取消"],btnclass:["btn btn-primary","btn btn-danger"]},function(){t(!0)},function(){t(!1)})};$.modalAlert=function(n,t){var i="";t=="success"&&(i="fa-check-circle");t=="error"&&(i="fa-times-circle");t=="warning"&&(i="fa-exclamation-circle");top.layer.alert(n,{icon:i,title:"系统提示",btn:["确认"],btnclass:["btn btn-primary"]})};$.modalMsg=function(n,t){if(t!=undefined){var i="";t=="success"&&(i="fa-check-circle");t=="error"&&(i="fa-times-circle");t=="warning"&&(i="fa-exclamation-circle");top.layer.msg(n,{icon:i,time:4e3,shift:5});top.$(".layui-layer-msg").find("i."+i).parents(".layui-layer-msg").addClass("layui-layer-msg-"+t)}else top.layer.msg(n)};$.modalClose=function(){var n=top.layer.getFrameIndex(window.name),t=top.$("#layui-layer"+n).find(".layui-layer-btn").find("#IsdialogClose"),i=t.is(":checked");t.length==0&&(i=!0);i?top.layer.close(n):location.reload()};$.submitForm=function(n){var n=$.extend({url:"",param:[],loading:"正在提交数据...",success:null,close:!0},n);$.loading(!0,n.loading);window.setTimeout(function(){$("[name=__RequestVerificationToken]").length>0&&(n.param.__RequestVerificationToken=$("[name=__RequestVerificationToken]").val());$.ajax({url:n.url,data:JSON.stringify(n.param),type:"post",dataType:"json",success:function(t){t.state=="success"?(n.success(t),$.modalMsg(t.message,t.state),n.close==!0&&$.modalClose()):$.modalAlert(t.message,t.state)},error:function(n,t,i){$.loading(!1);$.modalMsg(i,"error")},beforeSend:function(){$.loading(!0,n.loading)},complete:function(){$.loading(!1)}})},500)};$.deleteForm=function(n){var n=$.extend({prompt:"注：您确定要删除该项数据吗？",url:"",param:[],loading:"正在删除数据...",success:null,close:!0},n);$("[name=__RequestVerificationToken]").length>0&&(n.param.__RequestVerificationToken=$("[name=__RequestVerificationToken]").val());$.modalConfirm(n.prompt,function(t){t&&($.loading(!0,n.loading),window.setTimeout(function(){$.ajax({url:n.url,data:JSON.stringify(n.param),type:"post",dataType:"json",success:function(t){t.state=="success"?(n.success(t),$.modalMsg(t.message,t.state)):$.modalAlert(t.message,t.state)},error:function(n,t,i){$.loading(!1);$.modalMsg(i,"error")},beforeSend:function(){$.loading(!0,n.loading)},complete:function(){$.loading(!1)}})},500))})};$.jsonWhere=function(n,t){if(t!=null){var i=[];return $(n).each(function(n,r){t(r)&&i.push(r)}),i}};$.fn.jqGridRowValue=function(){var n=$(this),i=n.jqGrid("getGridParam","selarrrow"),r,u,t,f;if(i!=""){for(r=[],u=i.length,t=0;t<u;t++)f=n.jqGrid("getRowData",i[t]),r.push(f);return r}return n.jqGrid("getRowData",n.jqGrid("getGridParam","selrow"))};$.fn.formValid=function(){return $(this).valid({errorPlacement:function(n,t){t.parents(".formValue").addClass("has-error");t.parents(".has-error").find("i.error").remove();t.parents(".has-error").append('<i class="form-control-feedback fa fa-exclamation-circle error" data-placement="left" data-toggle="tooltip" title="'+n+'"><\/i>');$("[data-toggle='tooltip']").tooltip();t.parents(".input-group").hasClass("input-group")&&t.parents(".has-error").find("i.error").css("right","33px")},success:function(n){n.parents(".has-error").find("i.error").remove();n.parent().removeClass("has-error")}})};$.fn.formSerialize=function(n){var f=$(this),u,i;if(!!n){for(u in n){var t=f.find("#"+u),r=$.trim(n[u]).replace(/&nbsp;/g,""),e=t.attr("type");t.hasClass("select2-hidden-accessible")&&(e="select");switch(e){case"checkbox":r=="true"?t.prop("checked",!0):t.removeAttr("checked");break;case"select":t.attr("multiple")?t.val(r.split(",")).trigger("change"):t.val(r).trigger("change");break;default:t.val(r)}}return!1}return i={},f.find("input,select,textarea").each(function(){var t=$(this),r=t.attr("id"),u=t.attr("type"),n;t.hasClass("select2-hidden-accessible")&&(u="select");switch(u){case"checkbox":i[r]=t.is(":checked");break;case"select":if(n=t.val()==""?"&nbsp;":t.val(),n==null&&(n="&nbsp;"),n instanceof Array&&(n=n.join(",")),!$.request("keyValue")&&(n=n.replace(/&nbsp;/g,""),n===""))break;i[r]=n;break;default:if(n=t.val()==""?"&nbsp;":t.val(),n==null&&(n="&nbsp;"),!$.request("keyValue")&&(n=n.replace(/&nbsp;/g,""),n===""))break;i[r]=n}}),$("[name=__RequestVerificationToken]").length>0&&(i.__RequestVerificationToken=$("[name=__RequestVerificationToken]").val()),i};$.fn.bindSelect=function(n){var n=$.extend({id:"id",text:"text",search:!1,url:"",data:[],param:[],change:null},n),t=$(this),i;if(n.url!="")$.ajax({url:n.url,data:n.param,dataType:"json",async:!1,success:function(i){$.each(i,function(r){t.append($("<option><\/option>").val(i[r][n.id]).html(i[r][n.text]))});t.select2({minimumResultsForSearch:n.search==!0?0:-1});t.on("change",function(){n.change!=null&&n.change(i[$(this).find("option:selected").index()]);$("#select2-"+t.attr("id")+"-container").html($(this).find("option:selected").text().replace(/　　/g,""))})}});else if(n.data.length>0){i=n.data;$.each(i,function(r){t.append($("<option><\/option>").val(i[r][n.id]).html(i[r][n.text]))});t.select2({minimumResultsForSearch:n.search==!0?0:-1});t.on("change",function(){n.change!=null&&n.change(i[$(this).find("option:selected").index()]);$("#select2-"+t.attr("id")+"-container").html($(this).find("option:selected").text().replace(/　　/g,""))})}else t.select2({minimumResultsForSearch:n.search==!0?0:-1})};$.fn.authorizeButton=function(){var i=top.$(".NFine_iframe:visible").attr("id").substr(6),t=top.clients.authorizeButton[i],n=$(this);n.find("a[authorize=yes]").attr("authorize","no");t!=undefined&&$.each(t,function(i){n.find("#"+t[i].F_EnCode).attr("authorize","yes")});n.find("[authorize=no]").parents("li").prev(".split").remove();n.find("[authorize=no]").parents("li").remove();n.find("[authorize=no]").remove()};$.fn.dataGrid=function(n){var n=$.extend({datatype:"json",autowidth:!0,rownumbers:!0,shrinkToFit:!1,gridview:!0},n),t=$(this);n.onSelectRow=function(){var t=$(this).jqGrid("getGridParam","selrow").length,n=$(".operate");t>0?n.animate({left:0},200):n.animate({left:"-100.1%"},200);n.find(".close").click(function(){n.animate({left:"-100.1%"},200)})};t.jqGrid(n)};