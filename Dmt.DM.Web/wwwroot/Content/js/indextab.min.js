(function(n){n.nfinetab={requestFullScreen:function(){var n=document.documentElement;n.requestFullscreen?n.requestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullScreen?n.webkitRequestFullScreen():n.msRequestFullscreen&&n.msRequestFullscreen()},exitFullscreen:function(){var n=document;n.exitFullscreen?n.exitFullscreen():n.mozCancelFullScreen?n.mozCancelFullScreen():n.webkitCancelFullScreen&&n.webkitCancelFullScreen()},refreshTab:function(){var i=n(".page-tabs-content").find(".active").attr("data-id"),t=n('.NFine_iframe[data-id="'+i+'"]'),r=t.attr("src");n.loading(!0);t.attr("src",r).load(function(){n.loading(!1)})},activeTab:function(){var t=n(this).data("id");n(this).hasClass("active")||(n(".mainContent .NFine_iframe").each(function(){if(n(this).data("id")==t)return n(this).show().siblings(".NFine_iframe").hide(),!1}),n(this).addClass("active").siblings(".menuTab").removeClass("active"),n.nfinetab.scrollToTab(this))},closeOtherTabs:function(){n(".page-tabs-content").children("[data-id]").find(".fa-remove").parents("a").not(".active").each(function(){n('.NFine_iframe[data-id="'+n(this).data("id")+'"]').remove();n(this).remove()});n(".page-tabs-content").css("margin-left","0")},closeTab:function(){var i=n(this).parents(".menuTab").data("id"),u=n(this).parents(".menuTab").width(),r,t;return n(this).parents(".menuTab").hasClass("active")?(n(this).parents(".menuTab").next(".menuTab").length>0&&(t=n(this).parents(".menuTab").next(".menuTab:eq(0)").data("id"),n(this).parents(".menuTab").next(".menuTab:eq(0)").addClass("active"),n(".mainContent .NFine_iframe").each(function(){if(n(this).data("id")==t)return n(this).show().siblings(".NFine_iframe").hide(),!1}),r=parseInt(n(".page-tabs-content").css("margin-left")),r<0&&n(".page-tabs-content").animate({marginLeft:r+u+"px"},"fast"),n(this).parents(".menuTab").remove(),n(".mainContent .NFine_iframe").each(function(){if(n(this).data("id")==i)return n(this).remove(),!1})),n(this).parents(".menuTab").prev(".menuTab").length>0&&(t=n(this).parents(".menuTab").prev(".menuTab:last").data("id"),n(this).parents(".menuTab").prev(".menuTab:last").addClass("active"),n(".mainContent .NFine_iframe").each(function(){if(n(this).data("id")==t)return n(this).show().siblings(".NFine_iframe").hide(),!1}),n(this).parents(".menuTab").remove(),n(".mainContent .NFine_iframe").each(function(){if(n(this).data("id")==i)return n(this).remove(),!1}))):(n(this).parents(".menuTab").remove(),n(".mainContent .NFine_iframe").each(function(){if(n(this).data("id")==i)return n(this).remove(),!1}),n.nfinetab.scrollToTab(n(".menuTab.active"))),!1},addTab:function(){var i,u,f;n("#header-nav>ul>li.open").removeClass("open");i=n(this).attr("data-id");i!=""&&top.$.cookie("nfine_currentmoduleid",i,{path:"/"});var t=n(this).attr("href"),e=n.trim(n(this).text()),r=!0;return t==undefined||n.trim(t).length==0?!1:(n(".menuTab").each(function(){if(n(this).data("id")==t)return n(this).hasClass("active")||(n(this).addClass("active").siblings(".menuTab").removeClass("active"),n.nfinetab.scrollToTab(this),n(".mainContent .NFine_iframe").each(function(){if(n(this).data("id")==t)return n(this).show().siblings(".NFine_iframe").hide(),!1})),r=!1,!1}),r&&(u='<a href="javascript:;" class="active menuTab" data-id="'+t+'">'+e+' <i class="fa fa-remove"><\/i><\/a>',n(".menuTab").removeClass("active"),f='<iframe class="NFine_iframe" id="iframe'+i+'" name="iframe'+i+'"  width="100%" height="100%" src="'+t+'" frameborder="0" data-id="'+t+'" seamless><\/iframe>',n(".mainContent").find("iframe.NFine_iframe").hide(),n(".mainContent").append(f),n.loading(!0),n(".mainContent iframe:visible").load(function(){n.loading(!1)}),n(".menuTabs .page-tabs-content").append(u),n.nfinetab.scrollToTab(n(".menuTab.active"))),!1)},scrollTabRight:function(){var f=Math.abs(parseInt(n(".page-tabs-content").css("margin-left"))),e=n.nfinetab.calSumWidth(n(".content-tabs").children().not(".menuTabs")),u=n(".content-tabs").outerWidth(!0)-e,r=0,t,i;if(n(".page-tabs-content").width()<u)return!1;for(t=n(".menuTab:first"),i=0;i+n(t).outerWidth(!0)<=f;)i+=n(t).outerWidth(!0),t=n(t).next();for(i=0;i+n(t).outerWidth(!0)<u&&t.length>0;)i+=n(t).outerWidth(!0),t=n(t).next();r=n.nfinetab.calSumWidth(n(t).prevAll());r>0&&n(".page-tabs-content").animate({marginLeft:0-r+"px"},"fast")},scrollTabLeft:function(){var f=Math.abs(parseInt(n(".page-tabs-content").css("margin-left"))),e=n.nfinetab.calSumWidth(n(".content-tabs").children().not(".menuTabs")),r=n(".content-tabs").outerWidth(!0)-e,u=0,t,i;if(n(".page-tabs-content").width()<r)return!1;for(t=n(".menuTab:first"),i=0;i+n(t).outerWidth(!0)<=f;)i+=n(t).outerWidth(!0),t=n(t).next();if(i=0,n.nfinetab.calSumWidth(n(t).prevAll())>r){while(i+n(t).outerWidth(!0)<r&&t.length>0)i+=n(t).outerWidth(!0),t=n(t).prev();u=n.nfinetab.calSumWidth(n(t).prevAll())}n(".page-tabs-content").animate({marginLeft:0-u+"px"},"fast")},scrollToTab:function(t){var f=n.nfinetab.calSumWidth(n(t).prevAll()),e=n.nfinetab.calSumWidth(n(t).nextAll()),o=n.nfinetab.calSumWidth(n(".content-tabs").children().not(".menuTabs")),r=n(".content-tabs").outerWidth(!0)-o,i=0,u;if(n(".page-tabs-content").outerWidth()<r)i=0;else if(e<=r-n(t).outerWidth(!0)-n(t).next().outerWidth(!0)){if(r-n(t).next().outerWidth(!0)>e)for(i=f,u=t;i-n(u).outerWidth()>n(".page-tabs-content").outerWidth()-r;)i-=n(u).prev().outerWidth(),u=n(u).prev()}else f>r-n(t).outerWidth(!0)-n(t).prev().outerWidth(!0)&&(i=f-n(t).prev().outerWidth(!0));n(".page-tabs-content").animate({marginLeft:0-i+"px"},"fast")},calSumWidth:function(t){var i=0;return n(t).each(function(){i+=n(this).outerWidth(!0)}),i},init:function(){n(".menuItem").on("click",n.nfinetab.addTab);n(".menuTabs").on("click",".menuTab i",n.nfinetab.closeTab);n(".menuTabs").on("click",".menuTab",n.nfinetab.activeTab);n(".tabLeft").on("click",n.nfinetab.scrollTabLeft);n(".tabRight").on("click",n.nfinetab.scrollTabRight);n(".tabReload").on("click",n.nfinetab.refreshTab);n(".tabCloseCurrent").on("click",function(){n(".page-tabs-content").find(".active i").trigger("click")});n(".tabCloseAll").on("click",function(){n(".page-tabs-content").children("[data-id]").find(".fa-remove").each(function(){n('.NFine_iframe[data-id="'+n(this).data("id")+'"]').remove();n(this).parents("a").remove()});n(".page-tabs-content").children("[data-id]:first").each(function(){n('.NFine_iframe[data-id="'+n(this).data("id")+'"]').show();n(this).addClass("active")});n(".page-tabs-content").css("margin-left","0")});n(".tabCloseOther").on("click",n.nfinetab.closeOtherTabs);n(".fullscreen").on("click",function(){n(this).attr("fullscreen")?(n(this).removeAttr("fullscreen"),n.nfinetab.exitFullscreen(),n(".tabReload").trigger("click")):(n(this).attr("fullscreen","true"),n.nfinetab.requestFullScreen(),n(".tabReload").trigger("click"))})}};n(function(){n.nfinetab.init()})})(jQuery);